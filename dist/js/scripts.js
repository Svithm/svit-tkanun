let activePopup,popupBg=document.querySelector(".popup-bg"),closeButtons=document.querySelectorAll(".close"),basketButton=document.querySelector(".js-basket-popup"),basketPopup=document.querySelector(".items-cart"),orderButton=document.querySelector(".js-order-button"),orderPopup=document.querySelector(".order");function basket(){popupOpen(event,basketPopup),basketFunctional()}function order(){popupOpen(event,orderPopup)}function popupOpen(e,t){e.preventDefault(),checkActivePopup(),t.classList.add("active-popup"),popupBg.style.display="block",activePopup=document.querySelector(".active-popup"),popupBg.onclick=checkClick}function checkActivePopup(){null!=activePopup&&activePopup.classList.remove("active-popup")}function closePopup(){activePopup.classList.remove("active-popup"),popupBg.style.display="none"}function checkClick(e){e.target==popupBg&&(popupBg.style.display="none",activePopup.classList.remove("active-popup"))}basketButton.onclick=basket,orderButton.onclick=order,closeButtons.forEach(e=>{e.onclick=closePopup});let filtersContent,filters=document.querySelectorAll(".filter");function filterOpen(e){if(e.target==this)return filtersContent=this.querySelector(".filter-content"),filtersContent.classList.toggle("active-filter-content"),!1;this.childNodes.forEach(t=>{if(e.target!=t)return!1;filtersContent=e.target.closest(".filter").querySelector(".filter-content"),filtersContent.classList.toggle("active-filter-content")})}filters.forEach(e=>{e.onclick=filterOpen});let priceStart=document.querySelector("#priceStart"),priceFinish=document.querySelector("#priceFinish"),priceNumberStart=document.querySelector("#priceNumberStart"),priceNumberFinish=document.querySelector("#priceNumberEnd"),priceNumberStartWrap=document.querySelector(".priceNumberStart"),priceNumberEndWrap=document.querySelector(".priceNumberEnd");function priceStartChange(){if(priceStart.value>priceFinish.value)return!1;priceNumberStartWrap.innerHTML=`<input id="priceNumberStart" type="number" name="min-price" value="${priceStart.value}">`}function priceFinishChange(){if(priceFinish.value<priceStart.value)return!1;priceNumberEndWrap.innerHTML=`<input id="priceNumberEnd" type="number" name="max-price" value="${priceFinish.value}">`}function priceNumberStartChange(){if(priceNumberStart.value>priceNumberFinish.value||priceNumberFinish.value<priceStart.getAttribute("min")||priceNumberFinish.value>priceStart.getAttribute("max"))return!1;priceStart.setAttribute("value",priceNumberStart.value)}function priceNumberFinishChange(){if(priceNumberFinish.value<priceNumberStart.value)return!1;priceNumberFinish.value<priceStart.getAttribute("min")?priceNumberEndWrap.innerHTML=`<input id="priceNumberEnd" type="number" name="max-price" value="${priceStart.getAttribute("min")}">`:priceNumberFinish.value>priceStart.getAttribute("max")&&(priceNumberEndWrap.innerHTML=`<input id="priceNumberEnd" type="number" name="max-price" value="${priceStart.getAttribute("max")}">`),priceFinish.setAttribute("value",priceNumberFinish.value)}priceStart.oninput=priceStartChange,priceFinish.oninput=priceFinishChange,priceNumberStart.oninput=priceNumberStartChange,priceNumberFinish.oninput=priceNumberFinishChange;let burger=document.querySelector(".burger"),menu=document.querySelector(".menu");function basketFunctional(){let e=document.querySelectorAll(".basket-content"),t=document.querySelectorAll(".product-price"),r=document.querySelectorAll(".plus"),u=document.querySelectorAll(".minus"),n=document.querySelectorAll(".custom-input"),c=document.querySelector(".total-price");console.log(t);for(let t=0;t<e.length;t++)e[t].setAttribute("data-pr-count",[t]);function p(e){e.preventDefault();let t=this.closest(".basket-content").getAttribute("data-pr-count");n[t].value=parseInt(n[t].value)+1,l()}function o(e){e.preventDefault();let t=this.closest(".basket-content").getAttribute("data-pr-count");if(0==n[t].value)return!1;n[t].value=parseInt(n[t].value)-1,l()}function l(){let r=0;for(i=0;i<e.length;i++)r+=parseInt(n[i].value)*parseInt(t[i].textContent);c.textContent=r+" грн"}r.forEach(e=>{e.onclick=p}),u.forEach(e=>{e.onclick=o})}burger.onclick=function(e){e.preventDefault(),menu.classList.toggle("burger-menu-toggle"),burger.classList.toggle("burger-toggle")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJhY3RpdmVQb3B1cCIsInBvcHVwQmciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbG9zZUJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYmFza2V0QnV0dG9uIiwiYmFza2V0UG9wdXAiLCJvcmRlckJ1dHRvbiIsIm9yZGVyUG9wdXAiLCJiYXNrZXQiLCJwb3B1cE9wZW4iLCJldmVudCIsImJhc2tldEZ1bmN0aW9uYWwiLCJvcmRlciIsInBvcHVwIiwicHJldmVudERlZmF1bHQiLCJjaGVja0FjdGl2ZVBvcHVwIiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJkaXNwbGF5Iiwib25jbGljayIsImNoZWNrQ2xpY2siLCJ1bmRlZmluZWQiLCJyZW1vdmUiLCJjbG9zZVBvcHVwIiwiZSIsInRhcmdldCIsImZvckVhY2giLCJlbGVtZW50IiwiZmlsdGVyc0NvbnRlbnQiLCJmaWx0ZXJzIiwiZmlsdGVyT3BlbiIsInRoaXMiLCJ0b2dnbGUiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJjbG9zZXN0IiwicHJpY2VTdGFydCIsInByaWNlRmluaXNoIiwicHJpY2VOdW1iZXJTdGFydCIsInByaWNlTnVtYmVyRmluaXNoIiwicHJpY2VOdW1iZXJTdGFydFdyYXAiLCJwcmljZU51bWJlckVuZFdyYXAiLCJwcmljZVN0YXJ0Q2hhbmdlIiwidmFsdWUiLCJpbm5lckhUTUwiLCJwcmljZUZpbmlzaENoYW5nZSIsInByaWNlTnVtYmVyU3RhcnRDaGFuZ2UiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJwcmljZU51bWJlckZpbmlzaENoYW5nZSIsIm9uaW5wdXQiLCJidXJnZXIiLCJtZW51IiwicHJvZHVjdCIsInByb2R1Y3RQcmljZSIsInBsdXMiLCJtaW51cyIsInByb2R1Y3RDb3VudCIsInRvdGFsUHJpY2UiLCJjb25zb2xlIiwibG9nIiwiaSIsImxlbmd0aCIsInByb2R1Y3RQbHVzIiwibnVtYmVyIiwi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QyxJQUdkUCxFQUFNOUIsUUFBU0YsSUFDYkEsRUFBRUwsUUFBVWdELElBM0JoQmhCLE9BQU9oQyxRQUFVLFNBQVVWLEdBQ3pCQSxFQUFNSSxpQkFDTnVDLEtBQUtyQyxVQUFVaUIsT0FBTyxzQkFDdEJtQixPQUFPcEMsVUFBVWlCLE9BQU8iLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vcG9wdXBzIFxyXG5sZXQgcG9wdXBCZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYmdcIiksIFxyXG4gICAgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbG9zZVwiKSxcclxuICAgIGJhc2tldEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtYmFza2V0LXBvcHVwXCIpLFxyXG4gICAgYmFza2V0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1zLWNhcnRcIiksXHJcbiAgICBvcmRlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtb3JkZXItYnV0dG9uXCIpLFxyXG4gICAgb3JkZXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3JkZXJcIiksXHJcbiAgICBhY3RpdmVQb3B1cFxyXG5cclxuYmFza2V0QnV0dG9uLm9uY2xpY2sgPSBiYXNrZXRcclxuICAgIFxyXG5mdW5jdGlvbiBiYXNrZXQgKCl7XHJcbiAgcG9wdXBPcGVuKGV2ZW50LCBiYXNrZXRQb3B1cClcclxuICBiYXNrZXRGdW5jdGlvbmFsKClcclxufVxyXG5cclxub3JkZXJCdXR0b24ub25jbGljayA9IG9yZGVyXHJcbiAgICBcclxuZnVuY3Rpb24gb3JkZXIgKCl7XHJcbiAgcG9wdXBPcGVuKGV2ZW50LCBvcmRlclBvcHVwKVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cE9wZW4gKGV2ZW50LCBwb3B1cCl7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gIGNoZWNrQWN0aXZlUG9wdXAoKVxyXG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtcG9wdXBcIilcclxuICBwb3B1cEJnLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcclxuICBhY3RpdmVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlLXBvcHVwXCIpXHJcbiAgcG9wdXBCZy5vbmNsaWNrID0gY2hlY2tDbGlja1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0FjdGl2ZVBvcHVwICgpe1xyXG4gIGlmKGFjdGl2ZVBvcHVwICE9IHVuZGVmaW5lZCl7XHJcbiAgICBhY3RpdmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXBvcHVwXCIpXHJcbiAgfVxyXG59XHJcblxyXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICBlbGVtZW50Lm9uY2xpY2sgPSBjbG9zZVBvcHVwXHJcbn0pXHJcblxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwICgpe1xyXG4gIGFjdGl2ZVBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtcG9wdXBcIilcclxuICBwb3B1cEJnLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0NsaWNrIChlKXtcclxuICBpZihlLnRhcmdldCA9PSBwb3B1cEJnKXtcclxuICAgIHBvcHVwQmcuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICBhY3RpdmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXBvcHVwXCIpXHJcbiAgfSBcclxufVxyXG5cclxuLy9maWx0ZXJzIFxyXG5sZXQgZmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyXCIpLFxyXG4gICAgZmlsdGVyc0NvbnRlbnRcclxuXHJcbmZpbHRlcnMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUub25jbGljayA9IGZpbHRlck9wZW5cclxufSlcclxuXHJcbmZ1bmN0aW9uIGZpbHRlck9wZW4gKGV2ZW50KXtcclxuICBpZihldmVudC50YXJnZXQgPT0gdGhpcyl7XHJcbiAgICBmaWx0ZXJzQ29udGVudCA9IHRoaXMucXVlcnlTZWxlY3RvcihcIi5maWx0ZXItY29udGVudFwiKVxyXG4gICAgZmlsdGVyc0NvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS1maWx0ZXItY29udGVudFwiKSBcclxuICAgIHJldHVybiBmYWxzZSBcclxuICB9XHJcbiAgIFxyXG4gIHRoaXMuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCk9PntcclxuICAgIGlmKGV2ZW50LnRhcmdldCA9PSBjaGlsZCl7XHJcbiAgICAgIGZpbHRlcnNDb250ZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZmlsdGVyXCIpLnF1ZXJ5U2VsZWN0b3IoXCIuZmlsdGVyLWNvbnRlbnRcIilcclxuICAgICAgZmlsdGVyc0NvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS1maWx0ZXItY29udGVudFwiKSBcclxuICAgIH1lbHNle1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgfSlcclxufVxyXG5cclxuLy9wcmljZSByYW5nZSBcclxubGV0IHByaWNlU3RhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaWNlU3RhcnRcIiksXHJcbiAgICBwcmljZUZpbmlzaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpY2VGaW5pc2hcIiksXHJcbiAgICBwcmljZU51bWJlclN0YXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmljZU51bWJlclN0YXJ0XCIpLFxyXG4gICAgcHJpY2VOdW1iZXJGaW5pc2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaWNlTnVtYmVyRW5kXCIpLFxyXG4gICAgcHJpY2VOdW1iZXJTdGFydFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaWNlTnVtYmVyU3RhcnRcIiksXHJcbiAgICBwcmljZU51bWJlckVuZFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaWNlTnVtYmVyRW5kXCIpXHJcblxyXG5wcmljZVN0YXJ0Lm9uaW5wdXQgPSBwcmljZVN0YXJ0Q2hhbmdlXHJcbnByaWNlRmluaXNoLm9uaW5wdXQgPSBwcmljZUZpbmlzaENoYW5nZSAgXHJcbnByaWNlTnVtYmVyU3RhcnQub25pbnB1dCA9IHByaWNlTnVtYmVyU3RhcnRDaGFuZ2VcclxucHJpY2VOdW1iZXJGaW5pc2gub25pbnB1dCA9IHByaWNlTnVtYmVyRmluaXNoQ2hhbmdlXHJcblxyXG5mdW5jdGlvbiBwcmljZVN0YXJ0Q2hhbmdlICgpe1xyXG4gIGlmKHByaWNlU3RhcnQudmFsdWUgPiBwcmljZUZpbmlzaC52YWx1ZSl7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbiAgcHJpY2VOdW1iZXJTdGFydFdyYXAuaW5uZXJIVE1MID0gYDxpbnB1dCBpZD1cInByaWNlTnVtYmVyU3RhcnRcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cIm1pbi1wcmljZVwiIHZhbHVlPVwiJHtwcmljZVN0YXJ0LnZhbHVlfVwiPmBcclxufVxyXG5cclxuZnVuY3Rpb24gcHJpY2VGaW5pc2hDaGFuZ2UgKCl7XHJcbiAgaWYocHJpY2VGaW5pc2gudmFsdWUgPCBwcmljZVN0YXJ0LnZhbHVlKXtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBwcmljZU51bWJlckVuZFdyYXAuaW5uZXJIVE1MID0gYDxpbnB1dCBpZD1cInByaWNlTnVtYmVyRW5kXCIgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJtYXgtcHJpY2VcIiB2YWx1ZT1cIiR7cHJpY2VGaW5pc2gudmFsdWV9XCI+YFxyXG59XHJcblxyXG5mdW5jdGlvbiBwcmljZU51bWJlclN0YXJ0Q2hhbmdlICgpe1xyXG4gIGlmKHByaWNlTnVtYmVyU3RhcnQudmFsdWUgPiBwcmljZU51bWJlckZpbmlzaC52YWx1ZSAgfHwgcHJpY2VOdW1iZXJGaW5pc2gudmFsdWUgPCBwcmljZVN0YXJ0LmdldEF0dHJpYnV0ZShcIm1pblwiKSB8fCBwcmljZU51bWJlckZpbmlzaC52YWx1ZSA+IHByaWNlU3RhcnQuZ2V0QXR0cmlidXRlKFwibWF4XCIpKXtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBwcmljZVN0YXJ0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHByaWNlTnVtYmVyU3RhcnQudmFsdWUpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByaWNlTnVtYmVyRmluaXNoQ2hhbmdlICgpe1xyXG4gIGlmKHByaWNlTnVtYmVyRmluaXNoLnZhbHVlIDwgcHJpY2VOdW1iZXJTdGFydC52YWx1ZSl7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9ZWxzZSBpZihwcmljZU51bWJlckZpbmlzaC52YWx1ZSA8IHByaWNlU3RhcnQuZ2V0QXR0cmlidXRlKFwibWluXCIpKXtcclxuICAgIHByaWNlTnVtYmVyRW5kV3JhcC5pbm5lckhUTUwgPSBgPGlucHV0IGlkPVwicHJpY2VOdW1iZXJFbmRcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cIm1heC1wcmljZVwiIHZhbHVlPVwiJHtwcmljZVN0YXJ0LmdldEF0dHJpYnV0ZShcIm1pblwiKX1cIj5gXHJcbiAgfWVsc2UgaWYocHJpY2VOdW1iZXJGaW5pc2gudmFsdWUgPiBwcmljZVN0YXJ0LmdldEF0dHJpYnV0ZShcIm1heFwiKSl7XHJcbiAgICBwcmljZU51bWJlckVuZFdyYXAuaW5uZXJIVE1MID0gYDxpbnB1dCBpZD1cInByaWNlTnVtYmVyRW5kXCIgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJtYXgtcHJpY2VcIiB2YWx1ZT1cIiR7cHJpY2VTdGFydC5nZXRBdHRyaWJ1dGUoXCJtYXhcIil9XCI+YFxyXG4gIH0gIFxyXG4gIHByaWNlRmluaXNoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHByaWNlTnVtYmVyRmluaXNoLnZhbHVlKVxyXG59XHJcblxyXG4vL2J1cmdlciBtZW51IFxyXG5cclxubGV0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpLFxyXG4gICAgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKVxyXG5cclxuYnVyZ2VyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpe1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCkgXHJcbiAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYnVyZ2VyLW1lbnUtdG9nZ2xlXCIpXHJcbiAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJidXJnZXItdG9nZ2xlXCIpXHJcbn1cclxuXHJcbi8vcHJvZHVjdCArLy0gXHJcblxyXG5mdW5jdGlvbiBiYXNrZXRGdW5jdGlvbmFsICgpe1xyXG4gIGxldCBwcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iYXNrZXQtY29udGVudFwiKSxcclxuICAgICAgcHJvZHVjdFByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0LXByaWNlXCIpLFxyXG4gICAgICBwbHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wbHVzXCIpLFxyXG4gICAgICBtaW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWludXNcIiksXHJcbiAgICAgIHByb2R1Y3RDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY3VzdG9tLWlucHV0XCIpLFxyXG4gICAgICB0b3RhbFByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3RhbC1wcmljZVwiKVxyXG4gIFxyXG4gIGNvbnNvbGUubG9nKHByb2R1Y3RQcmljZSlcclxuICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvZHVjdC5sZW5ndGg7IGkrKyl7XHJcbiAgICBwcm9kdWN0W2ldLnNldEF0dHJpYnV0ZShcImRhdGEtcHItY291bnRcIiwgW2ldKSBcclxuICB9XHJcblxyXG5cclxuICBwbHVzLmZvckVhY2goKGUpPT57XHJcbiAgICBlLm9uY2xpY2sgPSBwcm9kdWN0UGx1c1xyXG4gIH0pXHJcblxyXG4gIG1pbnVzLmZvckVhY2goKGUpPT57XHJcbiAgICBlLm9uY2xpY2sgPSBwcm9kdWN0TWludXNcclxuICB9KVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gcHJvZHVjdFBsdXMgKGV2ZW50KXtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIGxldCBudW1iZXIgPSB0aGlzLmNsb3Nlc3QoXCIuYmFza2V0LWNvbnRlbnRcIikuZ2V0QXR0cmlidXRlKFwiZGF0YS1wci1jb3VudFwiKVxyXG4gICAgcHJvZHVjdENvdW50W251bWJlcl0udmFsdWUgPSBwYXJzZUludChwcm9kdWN0Q291bnRbbnVtYmVyXS52YWx1ZSkgKyAxXHJcbiAgICBwcmljZUNvdW50KClcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gcHJvZHVjdE1pbnVzIChldmVudCl7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBsZXQgbnVtYmVyID0gdGhpcy5jbG9zZXN0KFwiLmJhc2tldC1jb250ZW50XCIpLmdldEF0dHJpYnV0ZShcImRhdGEtcHItY291bnRcIilcclxuICAgIGlmKHByb2R1Y3RDb3VudFtudW1iZXJdLnZhbHVlID09IDApe1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIHByb2R1Y3RDb3VudFtudW1iZXJdLnZhbHVlID0gcGFyc2VJbnQocHJvZHVjdENvdW50W251bWJlcl0udmFsdWUpIC0gMVxyXG4gICAgcHJpY2VDb3VudCgpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwcmljZUNvdW50ICgpe1xyXG4gICAgbGV0IHByaWNlID0gMFxyXG4gICAgZm9yKGkgPSAwOyBpIDwgcHJvZHVjdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIHByaWNlICs9IHBhcnNlSW50KHByb2R1Y3RDb3VudFtpXS52YWx1ZSkgKiBwYXJzZUludChwcm9kdWN0UHJpY2VbaV0udGV4dENvbnRlbnQpXHJcbiAgICB9XHJcbiAgICB0b3RhbFByaWNlLnRleHRDb250ZW50ID0gYCR7cHJpY2V9INCz0YDQvWBcclxuICB9XHJcbn1cclxuIl19
